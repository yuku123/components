{
  "configurations": {
    "workflowConfigurationId": "1",
    "engine": {
      "type": "spark",
      "mode": "engine.spark.mode.local",
      "properties": {
        "master": "spark://192.168.1.103:7077",
        "appName": "cc",
        "spark.sql.warehouse.dir": "hdfs://192.168.1.103:9000/user/hive/warehouse",
        "hive.metastore.uris": "thrift://192.168.1.103:9083",
        "spark.executor.memory": "2g",
        "spark.driver.maxResultSize": "2g",
        "spark.cores.max": "1",
        "jars": "/home/zifang/workplace/idea_workplace/components/util-bigdata/target/util-bigdata-1.0-SNAPSHOT.jar",
        "logLevel": "ERROR"
      }
    },
    "cacheEngine":{
      "engineType":"hadoop",
      "cacheEngineService":"default"
    },
    "personalEnvironment":{
      "hdfsPath":"hdfs://192.168.1.103:/user/piday/test/a",
      "hiveDatabase":"personal"
    },
    "runtimeParameter": {
      "HADOOP_USER_NAME": "piday"
    }
  },
  "workflowNodeList":[
    {
      "nodeId": "start",
      "serviceUnit": "engine.service.empty",
      "connector": {
        "pre": [],
        "post": ["read_local"]
      }
    },
    {
      "nodeId": "read_local",
      "name": "read_local",
      "type": "engine.nodeType.resource",
      "serviceUnit": "engine.service.resourceHandler",
      "invokeDynamic": "handleLocalInput",
      "invokeParameter":{
        "localFile":"/Users/zifang/workplace/idea_workplace/components/util-workflow/src/test/resources/feature/input_all.csv"
      },
      "cache":{
        "flushFlag": true,
        "cacheTempNameAlias":"input_local"
      },
      "connector": {
        "pre": ["start"],
        "post": ["pivot"]
      }
    },
    {
      "nodeId": "pivot",
      "name": "pivot",
      "type": "engine.nodeType.resource",
      "serviceUnit": "engine.service.pivot",
      "invokeDynamic": "pivot",
      "invokeParameter":{
        "pivotColumnDefinations":[
          {
            "columnName":"name1",
            "pivotColumns":["name1_u1","name1_u2","name1_u3","name1_u4","name1_u5"],
            "value":"name1_value"
          },
          {
            "columnName":"name2",
            "pivotColumns":["name2_u1","name2_u2","name2_u3","name2_u4","name2_u5"]
          }
        ]
      },
      "connector": {
        "pre": ["read_local"],
        "post": ["changeColumnName"]
      }
    },
    {
      "nodeId": "changeColumnName",
      "name": "changeColumnName",
      "type": "engine.nodeType.connectors",
      "serviceUnit": "engine.service.changeColumn",
      "invokeParameter":{
        "name1_u1":"name1_changed_u1"
      },
      "cache":{
        "flushFlag": true,
        "cacheTempNameAlias":"changed_columns"
      },
      "connector": {
        "pre": ["pivot"],
        "post": ["sql"]
      }
    },{
      "nodeId": "sql",
      "name": "sql",
      "type": "engine.nodeType.connectors",
      "serviceUnit": "engine.service.sql",
      "invokeDynamic": "sql",
      "invokeParameter":{
        "sql": "select *,'a' as new from changed_columns"
      },
      "connector": {
        "pre": ["changeColumnName"],
        "post": []
      }
    }
  ]
}